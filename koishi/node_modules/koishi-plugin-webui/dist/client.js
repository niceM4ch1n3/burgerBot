var C=Object.defineProperty,E=Object.defineProperties;var H=Object.getOwnPropertyDescriptors;var m=Object.getOwnPropertySymbols;var J=Object.prototype.hasOwnProperty,$=Object.prototype.propertyIsEnumerable;var j=(e,t,n)=>t in e?C(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,x=(e,t)=>{for(var n in t||(t={}))J.call(t,n)&&j(e,n,t[n]);if(m)for(var n of m(t))$.call(t,n)&&j(e,n,t[n]);return e},O=(e,t)=>E(e,H(t));import{reactive as q,ref as l,watch as D}from"./vue.js";import{createRouter as F,createWebHistory as Q}from"./vue-router.js";const R=[],T=q({showOverlay:!1,overlayImage:null}),A=F({history:Q(KOISHI_CONFIG.uiPath),routes:[]}),I="koishi:";var g;(function(e){function t(u){if(typeof localStorage=="undefined")return;const o=localStorage.getItem(I+u);if(!!o)try{return JSON.parse(o)}catch{}}e.get=t;function n(u,o){typeof localStorage!="undefined"&&localStorage.setItem(I+u,JSON.stringify(o))}e.set=n;function s(u,o,S){const f=t(u),r=l(S?x(x({},o),f):f||o);return D(r,()=>n(u,r.value),{deep:typeof o=="object"}),r}e.create=s})(g||(g={}));const B=g.create("user"),G=g.create("config",{authType:0},!0),K=l(null),L=l(null),P=l(null),U=l(null),V=l(null),N=l(null),b={};function W(e,t){N.value.send(JSON.stringify({type:e,body:t}))}function _(e,t){b[e]=t}async function k(e){const t=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",t),s=new DataView(n);let u="";for(let o=0;o<s.byteLength;o+=4)u+=("00000000"+s.getUint32(o).toString(16)).slice(-8);return u}function y(e,t={}){if(e==="text")return y.escape(String(t.content));let n="[CQ:"+e;for(const s in t)t[s]&&(n+=`,${s}=${y.escape(t[s],!0)}`);return n+"]"}(function(e){function t(r,c=!1){const i=String(r).replace(/&/g,"&amp;").replace(/\[/g,"&#91;").replace(/\]/g,"&#93;");return c?i.replace(/,/g,"&#44;").replace(/(\ud83c[\udf00-\udfff])|(\ud83d[\udc00-\ude4f\ude80-\udeff])|[\u2600-\u2B55]/g," "):i}e.escape=t;function n(r){return String(r).replace(/&#91;/g,"[").replace(/&#93;/g,"]").replace(/&#44;/g,",").replace(/&amp;/g,"&")}e.unescape=n;function s(r){return r.map(c=>e(c.type,c.data)).join("")}e.join=s;function u(r,c="\\w+"){const i=new RegExp(`\\[CQ:(${c})((,\\w+=[^,\\]]*)*)\\]`).exec(r);if(!i)return null;const[,a,p]=i,h={};return p&&p.slice(1).split(",").forEach(d=>{const w=d.indexOf("=");h[d.slice(0,w)]=n(d.slice(w+1))}),{type:a,data:h,capture:i}}e.from=u;function o(r){const c=[];let i;for(;i=u(r);){const{capture:a}=i;a.index&&c.push({type:"text",data:{content:n(r.slice(0,a.index))}}),c.push(i),r=r.slice(a.index+a[0].length)}return r&&c.push({type:"text",data:{content:n(r)}}),c}e.parse=o;function S(r,c,i=!1){return o(r).map(({type:a,data:p,capture:h},d,w)=>{const v=c[a];return typeof v=="string"?v:typeof v=="function"?v(p,d,w):i?"":a==="text"?t(p.content):h[0]}).join("")}e.transform=S;function f(r,c){return(i,a={})=>e(r,O(x({},a),{[c]:i}))}e.at=f("at","id"),e.sharp=f("sharp","id"),e.quote=f("quote","id"),e.image=f("image","url"),e.video=f("video","url"),e.audio=f("audio","url")})(y||(y={}));export{P as awesome,G as config,b as listeners,K as meta,L as profile,_ as receive,U as registry,A as router,y as segment,W as send,k as sha256,N as socket,V as stats,g as storage,T as store,B as user,R as views};
