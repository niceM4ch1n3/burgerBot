import{defineComponent as y,computed as v,resolveComponent as h,openBlock as o,createBlock as _,withCtx as b,unref as t,createElementBlock as l,createVNode as f,createElementVNode as p,toDisplayString as d,normalizeStyle as z,createCommentVNode as F,pushScopeId as I,popScopeId as L,Fragment as O,createTextVNode as $,renderList as N}from"../vue.js";import{stats as c,profile as g,meta as D}from"../client.js";const P={key:1};var R=y({setup(m){const n=v(()=>({tooltip:{trigger:"item",formatter({data:u}){const e=[u.name];return e.push(`\u65E5\u5747\u8C03\u7528\uFF1A${u.value}`),e.join("<br>")}},series:[{type:"pie",data:Object.entries(c.value.commands).sort((u,e)=>e[1]-u[1]).map(([u,e])=>({name:u,value:e})),radius:["35%","65%"],minShowLabelAngle:3}]}));return(u,e)=>{const a=h("k-chart"),r=h("k-card");return o(),_(r,{class:"frameless",title:"\u6307\u4EE4\u8C03\u7528\u9891\u7387"},{default:b(()=>[Object.keys(t(c).commands).length?(o(),_(a,{key:0,option:t(n),autoresize:""},null,8,["option"])):(o(),l("p",P,"\u6682\u65E0\u6570\u636E\u3002"))]),_:1})}}});const V={key:1};var q=y({setup(m){const n=v(()=>({tooltip:{trigger:"item",formatter({data:u,value:e}){const a=[u.name];return a.push(`\u5E73\u53F0\uFF1A${u.platform}`),u.memberCount&&a.push(`\u4EBA\u6570\uFF1A${u.memberCount}`),u.assignee&&a.push(`\u63A5\u5165\uFF1A${u.assignee}`),a.push(`\u65E5\u5747\u53D1\u8A00\uFF1A${+e.toFixed(1)}`),a.push(`\u6628\u65E5\u53D1\u8A00\uFF1A${+u.last.toFixed(1)}`),a.join("<br>")}},series:[{type:"pie",data:c.value.groups.sort((u,e)=>e.value-u.value),radius:["35%","65%"],minShowLabelAngle:3}]}));return(u,e)=>{const a=h("k-chart"),r=h("k-card");return o(),_(r,{class:"frameless",title:"\u5404\u7FA4\u53D1\u8A00\u6570\u91CF"},{default:b(()=>[t(c).groups.length?(o(),_(a,{key:0,option:t(n),autoresize:""},null,8,["option"])):(o(),l("p",V,"\u6682\u65E0\u6570\u636E\u3002"))]),_:1})}}});const G={key:1};var H=y({setup(m){const n="\u65E5\u4E00\u4E8C\u4E09\u56DB\u4E94\u516D",u=v(()=>({tooltip:{trigger:"axis",axisPointer:{type:"cross"},formatter([{name:e,value:a}]){const r=new Date(e).getDay();return`${e} \u661F\u671F${n[r]}<br>\u53D1\u8A00\u6570\u91CF\uFF1A${a}`}},xAxis:{type:"category",data:Object.keys(c.value.history).reverse()},yAxis:{type:"value",axisLabel:{formatter:e=>e/1e3+"k"}},series:{type:"line",smooth:!0,data:Object.values(c.value.history).reverse()}}));return(e,a)=>{const r=h("k-chart"),i=h("k-card");return o(),_(i,{class:"frameless",title:"\u5386\u53F2\u53D1\u8A00\u6570\u91CF"},{default:b(()=>[Object.keys(t(c).history).length?(o(),_(r,{key:0,option:t(u),autoresize:""},null,8,["option"])):(o(),l("p",G,"\u6682\u65E0\u6570\u636E\u3002"))]),_:1})}}}),M=y({setup(m){const n=e=>`${(e-.5).toFixed()}:00-${(e+.5).toFixed()}:00`,u=v(()=>({tooltip:{trigger:"axis",axisPointer:{type:"cross"},formatter(e){const[{data:[a],dataIndex:r,color:i}]=e,s=c.value.hours[r],x=[`${n(a)}`,`\u6D88\u606F\u603B\u91CF\uFF1A${+(s.total||0).toFixed(1)}`];return e.reverse().forEach(({seriesName:k,color:B,data:[A,S],marker:E},j)=>{const w=j===0?s.command:j===1?s.dialogue:Math.max(0,s.total-s.command-s.dialogue);!w||x.push(`${E}${k}\uFF1A${+w.toFixed(1)}`)}),x.join("<br>")}},xAxis:{type:"value",min:0,max:24,minInterval:1,maxInterval:4,axisLabel:{formatter:e=>e+":00"},axisPointer:{label:{formatter:({value:e})=>n(e)}}},yAxis:{type:"value"},series:[{name:"\u5176\u4ED6",data:c.value.hours.map((e,a)=>[a+.5,e.total||0]),type:"bar",stack:1,itemStyle:{color:"rgb(255,219,92)"}},{name:"\u6559\u5B66",data:c.value.hours.map((e,a)=>[a+.5,(e.command||0)+(e.dialogue||0)]),type:"bar",stack:1,itemStyle:{color:"rgb(103,224,227)"}},{name:"\u6307\u4EE4",data:c.value.hours.map((e,a)=>[a+.5,e.command||0]),type:"bar",stack:1,itemStyle:{color:"rgb(55,162,218)"}}]}));return(e,a)=>{const r=h("k-chart"),i=h("k-card");return o(),_(i,{class:"frameless",title:"\u6BCF\u5C0F\u65F6\u53D1\u8A00\u6570\u91CF"},{default:b(()=>[f(r,{option:t(u),autoresize:""},null,8,["option"])]),_:1})}}});I("data-v-e50f42b4");const U={class:"load-bar"},K={class:"title"},T={class:"body"},J={key:0,class:"caption"},Q={key:0,class:"caption"},W={key:0,class:"caption"};L();var C=y({props:{rate:{type:null,required:!0},title:{type:String,required:!0}},setup(m){const n=m;function u(i,s=3){return(i*100).toFixed(s)+"%"}const e=["used","app","free"],a=v(()=>{const i=[n.rate[1]-n.rate[0],n.rate[0],1-n.rate[1]],s=i.indexOf(Math.max(...i));return e[s]}),r=v(()=>`${u(n.rate[0],1)} / ${u(n.rate[1],1)}`);return(i,s)=>(o(),l("div",U,[p("span",K,d(m.title),1),p("span",T,[p("span",{class:"used bar",style:z({width:u(m.rate[1]-m.rate[0])})},[t(a)==="used"?(o(),l("span",J,d(t(r)),1)):F("v-if",!0)],4),p("span",{class:"app bar",style:z({width:u(m.rate[0])})},[t(a)==="app"?(o(),l("span",Q,d(t(r)),1)):F("v-if",!0)],4),t(a)==="free"?(o(),l("span",W,d(t(r)),1)):F("v-if",!0)])]))}}),de=`.load-bar[data-v-e50f42b4] {
  display: flex;
  align-items: center;
  user-select: none;
}
.load-bar .title[data-v-e50f42b4] {
  min-width: 3rem;
}
.load-bar .body[data-v-e50f42b4] {
  width: 100%;
  height: 1.2rem;
  position: relative;
  display: inline;
  background-color: #474d84;
  border-radius: 4px;
  overflow: hidden;
}
.load-bar .bar[data-v-e50f42b4] {
  height: 100%;
  position: relative;
  float: left;
  transition: 0.3s ease;
}
.load-bar .used[data-v-e50f42b4] {
  background-color: #2477ff;
  color: white;
}
.load-bar .used[data-v-e50f42b4]:hover {
  background-color: #5797ff;
}
.load-bar .app[data-v-e50f42b4] {
  background-color: #e49400;
}
.load-bar .app[data-v-e50f42b4]:hover {
  background-color: #ffae18;
}
.load-bar .caption[data-v-e50f42b4] {
  left: 1rem;
  position: relative;
}
.load-bar + .load-bar[data-v-e50f42b4] {
  margin-top: 0.6rem;
}`;C.__scopeId="data-v-e50f42b4";var X=y({setup(m){return(n,u)=>{const e=h("k-card");return o(),_(e,{class:"load-chart",title:"\u8D1F\u8F7D\u72B6\u6001"},{default:b(()=>[f(C,{title:"CPU",rate:t(g).cpu},null,8,["rate"]),f(C,{title:"\u5185\u5B58",rate:t(g).memory},null,8,["rate"])]),_:1})}}});const Y={class:"card-grid profile-grid"},Z={key:0},ee=p("th",null,"\u5E73\u53F0\u540D",-1),te=p("th",null,"\u7528\u6237\u540D",-1),ue=p("th",null,"\u8FD0\u884C\u72B6\u6001",-1),ae=p("th",null,"\u5F53\u524D\u6D88\u606F\u9891\u7387",-1),oe={key:0},ne={key:0},re={key:1},se={key:0,class:"card-grid chart-grid"};var ce=y({setup(m){const n=KOISHI_CONFIG,u=["\u8FD0\u884C\u4E2D","\u95F2\u7F6E","\u79BB\u7EBF","\u7F51\u7EDC\u5F02\u5E38","\u670D\u52A1\u5668\u5F02\u5E38","\u5C01\u7981\u4E2D","\u5C1D\u8BD5\u8FDE\u63A5"],e=v(()=>g.value.bots.reduce((r,i)=>r+i.currentRate[0],0)),a=v(()=>Object.values(c.value.botSend).reduce((r,i)=>r+i,0).toFixed(1));return(r,i)=>{const s=h("k-numeric"),x=h("k-card");return o(),l(O,null,[p("div",Y,[f(s,{title:"\u5F53\u524D\u6D88\u606F\u9891\u7387",icon:"paper-plane"},{default:b(()=>[$(d(t(e))+" / min",1)]),_:1}),t(n).database?(o(),_(s,{key:0,title:"\u8FD1\u671F\u6D88\u606F\u9891\u7387",icon:"history"},{default:b(()=>[$(d(t(a))+" / d",1)]),_:1})):F("v-if",!0),t(D)?(o(),_(s,{key:1,title:"\u6570\u636E\u5E93\u4F53\u79EF",icon:"database",type:"size",value:t(D).storageSize,fallback:"\u672A\u5B89\u88C5"},null,8,["value"])):F("v-if",!0),f(s,{title:"\u8D44\u6E90\u670D\u52A1\u5668",icon:"hdd",type:"size",value:t(D).assetSize,fallback:"\u672A\u5B89\u88C5"},null,8,["value"]),t(n).database?(o(),_(s,{key:2,title:"\u6D3B\u8DC3\u7528\u6237\u6570\u91CF",icon:"heart"},{default:b(()=>[$(d(t(D).activeUsers),1)]),_:1})):F("v-if",!0),t(n).database?(o(),_(s,{key:3,title:"\u6D3B\u8DC3\u7FA4\u6570\u91CF",icon:"users"},{default:b(()=>[$(d(t(D).activeGroups),1)]),_:1})):F("v-if",!0)]),f(X),f(x,{class:"bot-table",title:"\u8D26\u53F7\u6570\u636E"},{default:b(()=>[t(g).bots.length?(o(),l("table",Z,[p("tr",null,[ee,te,ue,ae,t(c)?(o(),l("th",oe,"\u8FD1\u671F\u6D88\u606F\u9891\u7387")):F("v-if",!0)]),(o(!0),l(O,null,N(t(g).bots,({platform:k,username:B,selfId:A,code:S,currentRate:E})=>(o(),l("tr",null,[p("td",null,d(k),1),p("td",null,d(B),1),p("td",null,d(u[S]),1),p("td",null,"\u53D1\u9001 "+d(E[0])+"/min\uFF0C\u63A5\u6536 "+d(E[1])+"/min",1),t(c)?(o(),l("td",ne,"\u53D1\u9001 "+d(t(c).botSend[`${k}:${A}`]||0)+"/d\uFF0C\u63A5\u6536 "+d(t(c).botReceive[`${k}:${A}`]||0)+"/d",1)):F("v-if",!0)]))),256))])):(o(),l("p",re,"\u6682\u65E0\u6570\u636E\u3002"))]),_:1}),t(n).database?(o(),l("div",se,[f(H),f(M),f(q),f(R)])):F("v-if",!0)],64)}}});export{ce as default};
