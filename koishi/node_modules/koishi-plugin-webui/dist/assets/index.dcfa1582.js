import{defineComponent as b,computed as x,ref as y,watch as F,resolveComponent as k,openBlock as n,createElementBlock as g,normalizeClass as B,createElementVNode as t,toDisplayString as o,createBlock as r,withCtx as u,createCommentVNode as h,unref as p,createTextVNode as i,Fragment as D,renderList as E}from"../vue.js";import{user as $,send as z,awesome as j}from"../client.js";const M=["href"],N=i("\u5B98\u65B9"),V=i("\u672C\u5730"),W=i("\u53EF\u66F4\u65B0"),A={class:"description"},S={class:"version"},q={class:"latest"},I={class:"size"},K={class:"score"},L={class:"operation"},T={key:0};var U=b({props:{data:{type:null,required:!0}},setup(e){const d=e,f=x(()=>{const{local:a,version:l}=d.data;return a&&!a.isWorkspace&&a.version!==l});function m(a){return a>=1024e3?Math.round(a/1048576)+" MB":Math.round(a/1024)+" KB"}const s=y(!1);F(()=>d.data.local,()=>{s.value=!1},{deep:!0});function C(a){const{id:l,token:c}=$.value;z("install",{name:`${a.name}@^${a.version}`,id:l,token:c}),s.value=!0}return(a,l)=>{var v,_;const c=k("k-badge"),w=k("k-button");return n(),g("tr",{class:B({workspace:(v=e.data.local)==null?void 0:v.isWorkspace})},[t("td",{class:B(["package",e.data.local?e.data.local.isInstalled?"active":"local":"remote"])},[t("div",null,[t("a",{href:"http://npmjs.com/package/"+e.data.name,target:"blank",rel:"noopener noreferrer"},o(e.data.name.replace("koishi-plugin-","")),9,M),e.data.official?(n(),r(c,{key:0,type:"success"},{default:u(()=>[N]),_:1})):h("v-if",!0),((_=e.data.local)==null?void 0:_.isWorkspace)?(n(),r(c,{key:1,type:"default"},{default:u(()=>[V]),_:1})):p(f)?(n(),r(c,{key:2,type:"warning"},{default:u(()=>[W]),_:1})):h("v-if",!0)]),t("div",A,o(e.data.description),1)],2),t("td",S,o(e.data.local?e.data.local.version:"-"),1),t("td",q,o(e.data.version),1),t("td",I,o(m(e.data.size)),1),t("td",K,o(+e.data.score.final.toFixed(2)),1),t("td",L,[s.value?(n(),g("span",T,"\u5B89\u88C5\u4E2D")):!e.data.local||p(f)?(n(),r(w,{key:1,frameless:"",onClick:l[0]||(l[0]=H=>C(e.data))},{default:u(()=>[i(o(e.data.local?"\u66F4\u65B0":"\u5B89\u88C5"),1)]),_:1})):h("v-if",!0)])],2)}}}),P=`.package {
  text-align: left;
  padding-left: 3rem;
  position: relative;
}
.package a {
  font-weight: bold;
  transition: 0.3s ease;
  color: rgba(244, 244, 245, 0.75);
}
.package a:hover {
  color: #f4f4f5;
}
.package .description {
  margin-top: 0.15rem;
  font-size: 0.9rem;
}
.package::before {
  content: "";
  position: absolute;
  border-radius: 100%;
  width: 0.5rem;
  height: 0.5rem;
  top: 50%;
  left: 1.25rem;
  transform: translateY(-50%);
  transition: 0.3s ease;
  box-shadow: 1px 1px 2px #3333;
}
.package.active::before {
  background-color: #2d8515;
}
.package.local::before {
  background-color: #e49400;
}
.package.remote::before {
  background-color: #eeeeee5f;
}
.page-awesome td:not(.package) {
  min-width: 4rem;
}
tr.workspace .latest, tr.workspace .size {
  color: rgba(244, 244, 245, 0.25);
}`;const Y=t("tr",null,[t("th",null,"\u6A21\u5757\u540D\u79F0"),t("th",null,"\u5F53\u524D\u7248\u672C"),t("th",null,"\u6700\u65B0\u7248\u672C"),t("th",null,"\u603B\u4F53\u79EF"),t("th",null,"\u7EFC\u5408\u8BC4\u5206"),t("th",{class:"operation"},"\u64CD\u4F5C")],-1);var G=b({setup(e){return(d,f)=>{const m=k("k-card");return n(),r(m,{class:"page-awesome",title:"\u4F9D\u8D56\u7BA1\u7406"},{default:u(()=>[t("table",null,[Y,(n(!0),g(D,null,E(p(j),s=>(n(),r(U,{data:s},null,8,["data"]))),256))])]),_:1})}}});export{G as default};
